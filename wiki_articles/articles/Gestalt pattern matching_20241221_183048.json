{
  "title": "Gestalt pattern matching",
  "summary": "Gestalt pattern matching, also Ratcliff/Obershelp pattern recognition, is a string-matching algorithm for determining the similarity of two strings. It was developed in 1983 by John W. Ratcliff and John A. Obershelp and published in the Dr. Dobb's Journal in July 1988.",
  "content": "---\ntitle: Gestalt pattern matching\nurl: https://en.wikipedia.org/wiki/Gestalt_pattern_matching\nlanguage: en\ncategories: [\"Category:Articles with example Python (programming language) code\", \"Category:Articles with short description\", \"Category:Information theory\", \"Category:Quantitative linguistics\", \"Category:Recursion\", \"Category:Search algorithms\", \"Category:Short description is different from Wikidata\", \"Category:String metrics\", \"Category:Wikipedia articles needing clarification from April 2023\"]\nreferences: 0\nlast_modified: 2024-12-19T14:55:29Z\n---\n\n# Gestalt pattern matching\n\n## Summary\n\nGestalt pattern matching, also Ratcliff/Obershelp pattern recognition, is a string-matching algorithm for determining the similarity of two strings. It was developed in 1983 by John W. Ratcliff and John A. Obershelp and published in the Dr. Dobb's Journal in July 1988.\n\n## Full Content\n\nGestalt pattern matching, also Ratcliff/Obershelp pattern recognition, is a string-matching algorithm for determining the similarity of two strings. It was developed in 1983 by John W. Ratcliff and John A. Obershelp and published in the Dr. Dobb's Journal in July 1988.\n\nAlgorithm\nThe similarity of two strings \n  \n    \n      \n        \n          S\n          \n            1\n          \n        \n      \n    \n    {\\displaystyle S_{1}}\n  \n and \n  \n    \n      \n        \n          S\n          \n            2\n          \n        \n      \n    \n    {\\displaystyle S_{2}}\n  \n is determined by this formula: twice the number of matching characters \n  \n    \n      \n        \n          K\n          \n            m\n          \n        \n      \n    \n    {\\displaystyle K_{m}}\n  \n divided by the total number of characters of both strings. The matching characters are defined as some longest common substring plus recursively the number of matching characters in the non-matching regions on both sides of the longest common substring:\n\n  \n    \n      \n        \n          D\n          \n            r\n            o\n          \n        \n        =\n        \n          \n            \n              2\n              \n                K\n                \n                  m\n                \n              \n            \n            \n              \n                |\n              \n              \n                S\n                \n                  1\n                \n              \n              \n                |\n              \n              +\n              \n                |\n              \n              \n                S\n                \n                  2\n                \n              \n              \n                |\n              \n            \n          \n        \n      \n    \n    {\\displaystyle D_{ro}={\\frac {2K_{m}}{|S_{1}|+|S_{2}|}}}\n  \n\nwhere the similarity metric can take a value between zero and one:\n\n  \n    \n      \n        0\n        ≤\n        \n          D\n          \n            r\n            o\n          \n        \n        ≤\n        1\n      \n    \n    {\\displaystyle 0\\leq D_{ro}\\leq 1}\n  \n\nThe value of 1 stands for the complete match of the two strings, whereas the value of 0 means there is no match and not even one common letter.\n\nSample\nThe longest common substring is WIKIM (light grey) with 5 characters. There is no further substring on the left. The non-matching substrings on the right side are EDIA and ANIA. They again have a longest common substring IA (dark gray) with length 2.\nThe similarity metric is determined by:\n\n  \n    \n      \n        \n          \n            \n              2\n              \n                K\n                \n                  m\n                \n              \n            \n            \n              \n                |\n              \n              \n                S\n                \n                  1\n                \n              \n              \n                |\n              \n              +\n              \n                |\n              \n              \n                S\n                \n                  2\n                \n              \n              \n                |\n              \n            \n          \n        \n        =\n        \n          \n            \n              2\n              ⋅\n              (\n              \n                |\n              \n              \n                “WIKIM”\n              \n              \n                |\n              \n              +\n              \n                |\n              \n              \n                “IA”\n              \n              \n                |\n              \n              )\n            \n            \n              \n                |\n              \n              \n                S\n                \n                  1\n                \n              \n              \n                |\n              \n              +\n              \n                |\n              \n              \n                S\n                \n                  2\n                \n              \n              \n                |\n              \n            \n          \n        \n        =\n        \n          \n            \n              2\n              ⋅\n              (\n              5\n              +\n              2\n              )\n            \n            \n              9\n              +\n              9\n            \n          \n        \n        =\n        \n          \n            14\n            18\n          \n        \n        =\n        0.\n        \n          \n            7\n            ¯\n          \n        \n      \n    \n    {\\displaystyle {\\frac {2K_{m}}{|S_{1}|+|S_{2}|}}={\\frac {2\\cdot (|{\\text{“WIKIM”}}|+|{\\text{“IA”}}|)}{|S_{1}|+|S_{2}|}}={\\frac {2\\cdot (5+2)}{9+9}}={\\frac {14}{18}}=0.{\\overline {7}}}\n\nProperties\nThe Ratcliff/Obershelp matching characters can be substantially different from each longest common subsequence of the given strings. For example \n  \n    \n      \n        \n          S\n          \n            1\n          \n        \n        =\n        q\n        \n        c\n        c\n        c\n        c\n        c\n        \n        r\n        \n        d\n        d\n        d\n        \n        s\n        \n        b\n        b\n        b\n        b\n        \n        t\n        \n        e\n        e\n        e\n        \n        u\n      \n    \n    {\\displaystyle S_{1}=q\\;ccccc\\;r\\;ddd\\;s\\;bbbb\\;t\\;eee\\;u}\n  \n and \n  \n    \n      \n        \n          S\n          \n            2\n          \n        \n        =\n        v\n        \n        d\n        d\n        d\n        \n        w\n        \n        b\n        b\n        b\n        b\n        \n        x\n        \n        e\n        e\n        e\n        \n        y\n        \n        c\n        c\n        c\n        c\n        c\n        \n        z\n      \n    \n    {\\displaystyle S_{2}=v\\;ddd\\;w\\;bbbb\\;x\\;eee\\;y\\;ccccc\\;z}\n  \n have \n  \n    \n      \n        c\n        c\n        c\n        c\n        c\n      \n    \n    {\\displaystyle ccccc}\n  \n as their only longest common substring, and no common characters right of its occurrence, and likewise left, leading to \n  \n    \n      \n        \n          K\n          \n            m\n          \n        \n        =\n        5\n      \n    \n    {\\displaystyle K_{m}=5}\n  \n. However, the longest common subsequence of \n  \n    \n      \n        \n          S\n          \n            1\n          \n        \n      \n    \n    {\\displaystyle S_{1}}\n  \n and \n  \n    \n      \n        \n          S\n          \n            2\n          \n        \n      \n    \n    {\\displaystyle S_{2}}\n  \n is \n  \n    \n      \n        (\n        d\n        d\n        d\n        )\n        \n        (\n        b\n        b\n        b\n        b\n        )\n        \n        (\n        e\n        e\n        e\n        )\n      \n    \n    {\\displaystyle (ddd)\\;(bbbb)\\;(eee)}\n  \n, with a total length of \n  \n    \n      \n        10\n      \n    \n    {\\displaystyle 10}\n  \n.\n\nComplexity\nThe execution time of the algorithm is \n  \n    \n      \n        O\n        (\n        \n          n\n          \n            3\n          \n        \n        )\n      \n    \n    {\\displaystyle O(n^{3})}\n  \n in a worst case and \n  \n    \n      \n        O\n        (\n        \n          n\n          \n            2\n          \n        \n        )\n      \n    \n    {\\displaystyle O(n^{2})}\n  \n in an average case. By changing the computing method, the execution time can be improved significantly.\n\nCommutative property\nThe Python library implementation of the gestalt pattern matching algorithm is not commutative:\n\n  \n    \n      \n        \n          D\n          \n            r\n            o\n          \n        \n        (\n        \n          S\n          \n            1\n          \n        \n        ,\n        \n          S\n          \n            2\n          \n        \n        )\n        ≠\n        \n          D\n          \n            r\n            o\n          \n        \n        (\n        \n          S\n          \n            2\n          \n        \n        ,\n        \n          S\n          \n            1\n          \n        \n        )\n        .\n      \n    \n    {\\displaystyle D_{ro}(S_{1},S_{2})\\neq D_{ro}(S_{2},S_{1}).}\n  \n\nSample\nFor the two strings\n\n  \n    \n      \n        \n          S\n          \n            1\n          \n        \n        =\n        \n          GESTALT PATTERN MATCHING\n        \n      \n    \n    {\\displaystyle S_{1}={\\text{GESTALT PATTERN MATCHING}}}\n  \n\nand\n\n  \n    \n      \n        \n          S\n          \n            2\n          \n        \n        =\n        \n          GESTALT PRACTICE\n        \n      \n    \n    {\\displaystyle S_{2}={\\text{GESTALT PRACTICE}}}\n  \n\nthe metric result for \n\n  \n    \n      \n        \n          D\n          \n            r\n            o\n          \n        \n        (\n        \n          S\n          \n            1\n          \n        \n        ,\n        \n          S\n          \n            2\n          \n        \n        )\n      \n    \n    {\\displaystyle D_{ro}(S_{1},S_{2})}\n  \n is \n  \n    \n      \n        \n          \n            24\n            40\n          \n        \n      \n    \n    {\\displaystyle {\\frac {24}{40}}}\n  \n with the substrings GESTALT P, A, T, E and for\n\n  \n    \n      \n        \n          D\n          \n            r\n            o\n          \n        \n        (\n        \n          S\n          \n            2\n          \n        \n        ,\n        \n          S\n          \n            1\n          \n        \n        )\n      \n    \n    {\\displaystyle D_{ro}(S_{2},S_{1})}\n  \n the metric is \n  \n    \n      \n        \n          \n            26\n            40\n          \n        \n      \n    \n    {\\displaystyle {\\frac {26}{40}}}\n  \n with the substrings GESTALT P, R, A, C, I.\n\nApplications\nThe Python difflib library, which was introduced in version 2.1, implements a similar algorithm that predates the Ratcliff-Obershelp algorithm. Due to the unfavourable runtime behaviour of this similarity metric, three methods have been implemented. Two of them return an upper bound in a faster execution time. The fastest variant only compares the length of the two substrings:\n\n  \n    \n      \n        \n          D\n          \n            r\n            q\n            r\n          \n        \n        =\n        \n          \n            \n              2\n              ⋅\n              min\n              (\n              \n                |\n              \n              S\n              1\n              \n                |\n              \n              ,\n              \n                |\n              \n              S\n              2\n              \n                |\n              \n              )\n            \n            \n              \n                |\n              \n              S\n              1\n              \n                |\n              \n              +\n              \n                |\n              \n              S\n              2\n              \n                |\n              \n            \n          \n        \n      \n    \n    {\\displaystyle D_{rqr}={\\frac {2\\cdot \\min(|S1|,|S2|)}{|S1|+|S2|}}}\n  \n,\nThe second upper bound calculates twice the sum of all used characters \n  \n    \n      \n        \n          S\n          \n            1\n          \n        \n      \n    \n    {\\displaystyle S_{1}}\n  \n which occur in \n  \n    \n      \n        \n          S\n          \n            2\n          \n        \n      \n    \n    {\\displaystyle S_{2}}\n  \n divided by the length of both strings but the sequence is ignored.\n\n  \n    \n      \n        \n          D\n          \n            q\n            r\n          \n        \n        =\n        \n          \n            \n              2\n              ⋅\n              \n                \n                  |\n                \n              \n              {\n              \n              |\n              S\n              1\n              |\n              \n              }\n              ∩\n              {\n              \n              |\n              S\n              2\n              |\n              \n              }\n              \n                \n                  |\n                \n              \n            \n            \n              \n                |\n              \n              S\n              1\n              \n                |\n              \n              +\n              \n                |\n              \n              S\n              2\n              \n                |\n              \n            \n          \n        \n      \n    \n    {\\displaystyle D_{qr}={\\frac {2\\cdot {\\big |}\\{\\!\\vert S1\\vert \\!\\}\\cap \\{\\!\\vert S2\\vert \\!\\}{\\big |}}{|S1|+|S2|}}}\n  \n\nTrivially the following applies:\n\n  \n    \n      \n        0\n        ≤\n        \n          D\n          \n            r\n            o\n          \n        \n        ≤\n        \n          D\n          \n            q\n            r\n          \n        \n        ≤\n        \n          D\n          \n            r\n            q\n            r\n          \n        \n        ≤\n        1\n      \n    \n    {\\displaystyle 0\\leq D_{ro}\\leq D_{qr}\\leq D_{rqr}\\leq 1}\n  \n and\n\n  \n    \n      \n        0\n        ≤\n        \n          K\n          \n            m\n          \n        \n        ≤\n        \n          |\n        \n        {\n        \n        |\n        S\n        1\n        |\n        \n        }\n        ∩\n        {\n        \n        |\n        S\n        2\n        |\n        \n        }\n        \n          \n            |\n          \n        \n        ≤\n        min\n        (\n        \n          |\n        \n        S\n        1\n        \n          |\n        \n        ,\n        \n          |\n        \n        S\n        2\n        \n          |\n        \n        )\n        ≤\n        \n          \n            \n              \n                |\n              \n              S\n              1\n              \n                |\n              \n              +\n              \n                |\n              \n              S\n              2\n              \n                |\n              \n            \n            2\n          \n        \n      \n    \n    {\\displaystyle 0\\leq K_{m}\\leq |\\{\\!\\vert S1\\vert \\!\\}\\cap \\{\\!\\vert S2\\vert \\!\\}{\\big |}\\leq \\min(|S1|,|S2|)\\leq {\\frac {|S1|+|S2|}{2}}}\n  \n.\n\nReferences\nFurther reading\nRatcliff, John W.; Metzener, David (July 1988). \"Pattern Matching: The Gestalt Approach\". Dr. Dobb's Journal (46).\n\nSee also\nPattern matching\n",
  "categories": [
    "Category:Articles with example Python (programming language) code",
    "Category:Articles with short description",
    "Category:Information theory",
    "Category:Quantitative linguistics",
    "Category:Recursion",
    "Category:Search algorithms",
    "Category:Short description is different from Wikidata",
    "Category:String metrics",
    "Category:Wikipedia articles needing clarification from April 2023"
  ],
  "archived_date": "20241221_183048",
  "source_url": "https://en.wikipedia.org/wiki/Gestalt_pattern_matching"
}